<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GovernanceMap™ – Interactive Dashboard</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      background: #f8f9fc;
      color: #1e293b;
    }
    header {
      background: linear-gradient(90deg, #1e1b4b, #4338ca);
      color: white;
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      font-size: 1.2rem;
      margin: 0;
    }
    nav button {
      background: #6366f1;
      border: none;
      color: white;
      border-radius: 8px;
      padding: 0.5rem 1rem;
      font-weight: 500;
    }
    main {
      padding: 1.5rem;
      max-width: 900px;
      margin: 0 auto;
    }
    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .card {
      background: white;
      flex: 1;
      min-width: 160px;
      text-align: center;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .governance-map {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, 120px);
      gap: 1rem;
      margin-top: 2rem;
    }
    .zone {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      position: relative;
    }
    .zone h3 {
      margin: 0 0 0.5rem;
      font-size: 1rem;
      color: #4338ca;
    }
    .company {
      font-size: 0.9rem;
      padding: 0.2rem 0.4rem;
      background: #eef2ff;
      border-radius: 6px;
      display: inline-block;
      margin: 0.1rem;
    }
    .alerts {
      margin-top: 2rem;
      background: white;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .alerts h3 {
      margin-top: 0;
      color: #4338ca;
    }
    .alert {
      background: #f1f5f9;
      border-left: 4px solid #6366f1;
      padding: 0.5rem 0.75rem;
      border-radius: 4px;
      margin: 0.5rem 0;
    }
    .add-btn {
      display: block;
      margin: 2rem auto 0;
      background: linear-gradient(90deg, #6366f1, #7c3aed);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>GovernanceMap™</h1>
    <nav>
      <button onclick="location.reload()">Dashboard</button>
    </nav>
  </header>
  <main>
    <section class="stats">
      <div class="card">
        <h2>5</h2><p>Competitors</p>
      </div>
      <div class="card">
        <h2>3</h2><p>Active Alerts</p>
      </div>
      <div class="card">
        <h2>87%</h2><p>Coverage</p>
      </div>
    </section>

    <section class="governance-map">
      <div class="zone" id="private">
        <h3>Private</h3>
      </div>
      <div class="zone" id="hybrid">
        <h3>Hybrid</h3>
      </div>
      <div class="zone" id="commons">
        <h3>Commons</h3>
      </div>
      <div class="zone" id="protocol">
        <h3>Protocol</h3>
      </div>
    </section>

    <section class="alerts">
      <h3>Alerts</h3>
      <div id="alertList"></div>
    </section>

    <button class="add-btn" onclick="addCompetitor()">+ Add Competitor</button>
  </main>

  <script>
    const companies = [
      { name: "Tesla", type: "private" },
      { name: "Visa", type: "hybrid" },
      { name: "Wikipedia", type: "commons" },
      { name: "Bitcoin", type: "protocol" },
      { name: "Apple", type: "private" },
      { name: "Ethereum", type: "protocol" }
    ];
    const zones = { private: "Private", hybrid: "Hybrid", commons: "Commons", protocol: "Protocol" };
    const colors = { private:"#fef3c7", hybrid:"#dbeafe", commons:"#dcfce7", protocol:"#f3e8ff" };

    // Populate map
    companies.forEach(c => addToZone(c));

    function addToZone(c){
      const el = document.createElement("div");
      el.className = "company";
      el.textContent = c.name;
      document.getElementById(c.type).appendChild(el);
    }

    // Alerts system
    const alertList = document.getElementById("alertList");
    const alerts = [
      "Visa explores DAO-style governance model.",
      "Apple introduces open developer commons.",
      "Bitcoin forks into new protocol governance.",
      "Tesla partners with decentralized network."
    ];
    function showAlert(msg){
      const a = document.createElement("div");
      a.className = "alert";
      a.textContent = msg;
      alertList.prepend(a);
      if(alertList.childNodes.length > 4) alertList.removeChild(alertList.lastChild);
    }
    let i = 0;
    setInterval(() => {
      showAlert(alerts[i % alerts.length]);
      i++;
    }, 4000);

    // Add competitor
    function addCompetitor(){
      const name = "Org" + Math.floor(Math.random()*100);
      const types = ["private","hybrid","commons","protocol"];
      const type = types[Math.floor(Math.random()*4)];
      addToZone({ name, type });
      showAlert(`${name} entered as ${zones[type]} type.`);
    }
  </script>

  <!-- ABOUT & LEGEND PANEL -->
<div id="aboutPanel" style="
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.6); color:#1e293b;
  display:none; align-items:center; justify-content:center;">
  <div style="
    background:white; max-width:500px; border-radius:12px;
    padding:1.5rem; box-shadow:0 4px 12px rgba(0,0,0,0.25);">
    <h2 style="color:#4338ca;">About GovernanceMap™</h2>
    <p><strong>The Governance Dimension</strong> classifies organizations by how they capture and share value:</p>
    <ul>
      <li><b>Private</b> – Closed ownership, proprietary IP (e.g. Apple, Tesla)</li>
      <li><b>Hybrid</b> – Shared platforms, controlled participation (e.g. Visa, Airbnb)</li>
      <li><b>Commons</b> – Open collaboration and collective value (e.g. Wikipedia, Linux)</li>
      <li><b>Protocol</b> – Fully decentralized, rule-based systems (e.g. Bitcoin, Ethereum)</li>
    </ul>
    <p><b>Alerts</b> signal governance shifts or collaborations between these models.</p>
    <p style="font-size:0.9rem;color:#6b7280;margin-top:1rem;">Created by <b>Nathan Lumulisanay</b> · 2025 · CC BY-SA 4.0</p>
    <button onclick="toggleAbout()" style="
      margin-top:1rem; background:#6366f1; color:white;
      border:none; border-radius:8px; padding:0.5rem 1rem;">Close</button>
  </div>
</div>

<!-- INFO BUTTON -->
<button onclick="toggleAbout()" style="
  position:fixed; top:1rem; right:1rem; background:#6366f1;
  color:white; border:none; border-radius:50%; width:40px; height:40px;
  font-weight:bold; font-size:1.2rem; cursor:pointer;">?</button>

<script>
function toggleAbout(){
  const panel=document.getElementById('aboutPanel');
  panel.style.display = panel.style.display==='flex' ? 'none' : 'flex';
}
</script>
  
<!-- GOVERNANCE INDEX CALCULATOR v2.0 (Weighted Reflective Engine) -->
<div id="calcPanel" style="
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.6); display:none; z-index:1000;
  align-items:center; justify-content:center;">
  <div style="background:white; max-width:450px; width:90%; padding:25px; border-radius:16px;
              box-shadow:0 8px 20px rgba(0,0,0,0.15); overflow-y:auto; max-height:90vh;">
    <h2 style="color:#4a35d5; margin-bottom:12px;">Governance Index Calculator v2.0</h2>
    <p>Answer 1–5 (1 = Closed / 5 = Open). Weighted scoring reflects impact per dimension.</p>

    <form id="govForm">
      <label>1. Ownership openness (25%)</label><br>
      <input type="number" name="q1" min="1" max="5" required><br>
      <small style="color:#666;">Measures control over assets & IP rights — defines proprietary strength.</small><br><br>

      <label>2. Decision participation (20%)</label><br>
      <input type="number" name="q2" min="1" max="5" required><br>
      <small style="color:#666;">Assesses inclusivity in strategic or operational decision-making.</small><br><br>

      <label>3. Partner/user control sharing (20%)</label><br>
      <input type="number" name="q3" min="1" max="5" required><br>
      <small style="color:#666;">Evaluates how power and control extend beyond the organization’s boundary.</small><br><br>

      <label>4. Transparency & reporting (20%)</label><br>
      <input type="number" name="q4" min="1" max="5" required><br>
      <small style="color:#666;">Captures accountability and visibility of governance mechanisms.</small><br><br>

      <label>5. Knowledge/IP reusability (15%)</label><br>
      <input type="number" name="q5" min="1" max="5" required><br>
      <small style="color:#666;">Reflects openness of innovation, data, and resource circulation.</small><br><br>

      <button type="button" onclick="calculateWeightedIndex()" 
              style="background:#4a35d5; color:white; border:none; padding:10px 18px;
                     border-radius:10px; font-weight:bold;">Calculate</button>
    </form>

    <div id="result" style="margin-top:20px; display:none;">
      <h3>Result</h3>
      <p id="govScore" style="font-size:1.1em; font-weight:bold;"></p>
      <div id="barContainer" style="margin-top:10px; background:#eee; border-radius:10px; height:16px; position:relative;">
        <div id="bar" style="background:linear-gradient(90deg,#5a38e3,#4fa6ff,#5dd39e,#ffd15c);
                             width:0%; height:100%; border-radius:10px; transition:width 1s;"></div>
      </div>
      <p id="govText" style="margin-top:10px;"></p>
    </div>

    <button onclick="toggleCalc()" 
            style="margin-top:18px; background:#eee; border:none; padding:8px 14px; border-radius:10px;">Close</button>
  </div>
</div>

<script>
function toggleCalc(){
  const p = document.getElementById('calcPanel');
  p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
}

function calculateWeightedIndex(){
  const form = document.getElementById('govForm');
  const q = Array.from(form.querySelectorAll('input')).map(i=>parseFloat(i.value)||0);

  const weights = [0.25,0.20,0.20,0.20,0.15];
  let total = 0;
  for(let i=0;i<q.length;i++){ total += q[i]*weights[i]; }

  const score = Math.round(total*20); // normalize to 100
  let category='', text='';
  if(score<30){ category='Private'; text='Closed governance — proprietary and controlled.'; }
  else if(score<50){ category='Hybrid'; text='Balanced governance — suitable for platform collaboration.'; }
  else if(score<70){ category='Commons'; text='Collaborative governance — open and participatory.'; }
  else { category='Protocol'; text='Rule-based or decentralized governance — high autonomy.'; }

  document.getElementById('result').style.display='block';
  document.getElementById('govScore').innerText=`Governance Index: ${score}/100 (${category})`;
  document.getElementById('govText').innerText=text;
  document.getElementById('bar').style.width=score+'%';
}
</script>
